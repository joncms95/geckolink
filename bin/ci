#!/usr/bin/env bash
set -e

run_section() {
  echo ""
  echo "═══════════════════════════════════════════════════════════════"
  echo "  $1"
  echo "═══════════════════════════════════════════════════════════════"
  echo ""
}

run_section "1/4  Rufo (format)"
bundle exec rufo .

run_section "2/4  RuboCop (lint & auto-correct)"
bin/rubocop -A

run_section "3/4  Brakeman (security scan)"
bin/brakeman --no-pager

run_section "4/4  RSpec (tests)"
bundle exec rspec

echo ""
echo "═══════════════════════════════════════════════════════════════"
echo "  All checks passed."
echo "═══════════════════════════════════════════════════════════════"
echo ""
